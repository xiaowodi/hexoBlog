# 





# Shell学习笔记



## 输入输出重定向

### 1. 标准输入输出

| 设备   | 设备文件名  | 文件描述符 | 类型         |
| ------ | ----------- | ---------- | ------------ |
| 键盘   | /dev/stdin  | 0          | 标准输入     |
| 显示器 | /dev/sdtout | 1          | 标准输出     |
| 显示器 | /dev/sdterr | 2          | 标准错误输出 |

### 2. 输出重定向

| 类型                                              | 符号                    | 作用                                                       |
| ------------------------------------------------- | ----------------------- | ---------------------------------------------------------- |
| 标准输出重定向                                    | 命令 > 文件             | 以覆盖的方式，把命令的正确输出输出到指定的文件或设备当中   |
|                                                   | 命令 >> 文件            | 以追加的方式，把命令的正确输出输出到指定的文件或设备当中   |
| 标准错误输出重定向                                | 错误命令 2> 文件        | 以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中。 |
|                                                   | 错误命令 2>> 文件       | 以追加的方式，把命令的错误输出输出到指定的文件中。         |
| <font color=red>正确输出和错误输出同时保存</font> | 命令 > 文件 2>&1        | 以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中   |
|                                                   | 命令 >> 文件 2>&1       | 以追加的方式，把正确输出和错误输出都保存到同一个文件当中   |
|                                                   | 命令 &> 文件            | 以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中   |
|                                                   | 命令 &>> 文件           | 以追加的方式，把正确输出和错误输出都保存到同一个文件中     |
|                                                   | 命令 >> 文件1 2>> 文件2 | 把正确的输出追加到文件1中，把错误的输出追加到文件2中       |

有一种常用的方式

```shell
ls &>> /dev/null  #  将命令的正确输出和错误输出都输出到黑洞中
```





### 3. 输入重定向

`命令 < 文件` 把文件作为命令的输入

例子： wc统计文件中的 行、词、字节

```java
public class Demo2 {
    public static void main(String[] args) throws InterruptedException {
        while (true) {
            System.out.println("hello");
            Thread.sleep(1000);
        }
    }
}
```

```shell
[hadoop@kube-master1 Files]$ wc < Demo2.java 
  8  20 216
```



## 多命令顺序执行与管道符

### 命令顺序执行，逻辑与执行，逻辑或执行

| 多命令执行 | 格式             | 作用                                                         |
| ---------- | ---------------- | ------------------------------------------------------------ |
| `;`        | `命令1 ; 命令2`  | 多个命令顺序执行，命令之间没有任何逻辑联系                   |
| `&&`       | `命令1 && 命令2` | 逻辑与<br />当命令1正确执行，则命令2才会执行<br />当命令1执行不正确，则命令2不会执行 |
| `||`       | `命令1 || 命令2` | 逻辑或<br />当命令1执行不正确，则命令2才会执行<br />当命令1正确执行，则命令2不会执行 |

举例：

1. 统计磁盘复制时间

```shell
# dd 命令 复制磁盘
dd if=输入文件 of=输出文件 bs=字节数 count=个数
选项：
	if=输入文件		指定源文件或源设备
	of=输出文件		执行目标文件或目标设备
	bs=字节数		 指定一次输入/输出多少字节，即把这些字节看做一个数据块
	count=个数	  指定输入/输出多少个数据块
root@localhost~]# date; dd if=/dev/zero of=/root/testfile bs=1k count=100000; date
# 上述命令可以查看复制磁盘数据所花费的时间

```

2. 编译软件(`configure`完成后才可以`make`完成后才可以执行`make install` )

```shell
./configure && make && make install
```

例子2：

```shell
[root@localhost ~]# 命令 && echo yes || echo no
# 如果 命令执行成功 则输出 yes ，如果命令执行失败，则输出 no
```













